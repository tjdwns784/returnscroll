<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://www.mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="users">

	<!-- 아이디 찾기 -->
	<select id="searchId" resultType="string" parameterType="map">
		SELECT IFNULL(UID, '')  
		FROM USERS 
        WHERE UNAME=#{uname} AND PHONE=#{phone}
	</select>
	
	<!-- 회원 임시 비밀번호-->
	<select id="searchPassword" resultType="string" parameterType="map">
		SELECT IFNULL(UPW, '')
		FROM USERS 
		WHERE UID = #{uid} AND EMAIL = #{email}
	</select>

	<update id="update" parameterType="map">
		UPDATE USERS SET
		UPW=#{upw}, NICK=#{nick}, PHONE=#{phone}, EMAIL=#{email}
		WHERE UID=#{uid}
	</update>

	<delete id="delete" parameterType="map">
		<![CDATA[ 
			DELETE FROM USERS WHERE UID = #{uid} AND UPW = #{upw}
         ]]>
	</delete>
	
	<insert id="insert" parameterType="map">
		INSERT INTO USERS
		(UID, UPW, UNAME, NICK, BIRTH, PHONE, EMAIL)
		VALUES
		(#{uid}, #{upw}, #{uname},#{nick},#{birth},#{phone},#{email})
	</insert>
	
	<select id="login" parameterType="string" resultType="string">
		select *
		from `users` where uid = #{uid} and upw = #{upw}
	</select>
	
	<select id="uid" parameterType="string" resultType="string">
		select uname
		from `users` where uid =
		#{value}
	</select>
	
	<select id="nick" parameterType="string" resultType="string">
		select uname
		from `users` where nick =
		#{value}
	</select>
	
	<select id="email" parameterType="string" resultType="string">
		select uname
		from `users` where email =
		#{value}
	</select>

	<select id="invite" parameterType="string" resultType="map">
		select uid, uname, nick
		from `users` where uid =
		#{value}
	</select>

	<select id="" parameterType="string" resultType="string">
		select uname
		from `users` where email =
		#{value}
	</select>
	
</mapper>